

<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Btproxy-Bluetooth | XEI7 乱M集</title>
  <meta name="author" content="XEI7">
  
  <meta name="description" content="文章摘要bluetooth sniffer /bluetooth pin linkkey cracker/ blueSoleilpython /usr/local/bin/bluez_simple_agent_nouser hci0  02:11:0F:19:15:57 02:11:0F:19:15:57btproxy-&amp;gt;mitm.py.restart_bluetoothd()-&amp;gt;adapter.py._run(cmd)
注销掉代码mitmpy.restart_bluetoothd()dbus.exceptions.DBusException: org.freedesktop.DBus.Error.UnknownMethod: Method “FindAdapter” with signature “s” on interface “org.bluez.Manager” doesn’t exist
bluez_simple_agent_nouser  nu 110 “org.bluez.Manager”mitm.setup_adapters alreadypaired restart_bluetoothd
主/从设备都会使用蓝牙协议，直到主设备发出请求，从属设备通常保持待机状态。并且主设备可以连接到多台设备，而从属设备仅仅智能连接一台设备。代理会搜寻设备名称和类，所以其可以将设备名称和类复制到使用的蓝牙适配器中。在本例中，因为只有一个蓝牙适配器，所以只会复制从属设备的属性。
btproxy F4:8B:32:BA:0F:78 04:18:0F:19:35:57">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="Btproxy-Bluetooth"/>
  <meta property="og:site_name" content="XEI7 乱M集"/>

  
    <meta property="og:image" content="undefined"/>
  

  <link href="/imgs/favicon.ico" rel="icon" type="image/x-ico">
  <link rel="alternate" href="/atom.xml" title="XEI7 乱M集" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
</head>


<body>
  <header><div>
		
			<div id="imglogo">
				<a href="/"><img src="/imgs/logo.png" alt="XEI7 乱M集" title="XEI7 乱M集"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name">XEI7 乱M集</h1>
				<h2 class="blog-motto"></h2>
			</div>
			<nav class="animated">
				<ul>
					
						<li><a href="/">Home</a></li>
					
						<li><a href="/archives">Archives</a></li>
					
						<li><a href="/about">About</a></li>
					
						<li><a href="/urls">_</a></li>
					

				</ul>
			</nav>			
</div>
</header>
  <div id="content" class="inner">
    <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
    <div class="gallery">
  <div class="photoset">
    
      <img src="">
    
  </div>
  <div class="control">
    <div class="prev"></div>
    <div class="next"></div>
  </div>
</div>
  
  <div class="post-content">
    <header class="article-info clearfix">
  <h1 itemprop="name">
	Btproxy-Bluetooth
  </h1>
  <p class="article-author">By
    
      <a href="https://xei7.github.io" title="XEI7">XEI7</a>
    </p>
  <p class="article-time">
    <time datetime="1912-12-01T00:00:00.000Z" itemprop="datePublished">1912-12-01</time>
    Update date:<time datetime="2016-11-18T08:34:52.411Z" itemprop="dateModified">2016-11-18</time>
    
  </p>
</header>
    <div class="entry">
		
        <p>文章摘要<br>bluetooth sniffer /bluetooth pin linkkey cracker/ blueSoleil<br>python /usr/local/bin/bluez_simple_agent_nouser hci0  02:11:0F:19:15:57 02:11:0F:19:15:57<br>btproxy-&gt;mitm.py.restart_bluetoothd()-&gt;adapter.py._run(cmd)</p>
<p>注销掉代码mitmpy.restart_bluetoothd()<br>dbus.exceptions.DBusException: org.freedesktop.DBus.Error.UnknownMethod: Method “FindAdapter” with signature “s” on interface “org.bluez.Manager” doesn’t exist</p>
<p>bluez_simple_agent_nouser  nu 110 “org.bluez.Manager”<br>mitm.setup_adapters <if>alreadypaired restart_bluetoothd</if></p>
<p>主/从设备都会使用蓝牙协议，直到主设备发出请求，从属设备通常保持待机状态。并且主设备可以连接到多台设备，而从属设备仅仅智能连接一台设备。<br>代理会搜寻设备名称和类，所以其可以将设备名称和类复制到使用的蓝牙适配器中。在本例中，因为只有一个蓝牙适配器，所以只会复制从属设备的属性。</p>
<p>btproxy F4:8B:32:BA:0F:78 04:18:0F:19:35:57</p>
<a id="more"></a>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div></pre></td><td class="code"><pre><div class="line">sudo apt-get install bluez bluez-utils bluez-tools libbluetooth-dev python-dev</div><div class="line"></div><div class="line"></div><div class="line">bluez的编译安装依赖好些软件，下面记录下，可能比较简陋。</div><div class="line">configure: error: GLib &gt;= 2.28 is required</div><div class="line">解决方法：</div><div class="line">一般glib会被安装，主要是一些开发文件，如头文件被安装，ubuntu如下解决：</div><div class="line">     sudo apt-get install  libglib2.0-dev</div><div class="line"></div><div class="line">     configure: error: D-Bus &gt;= 1.6 is required</div><div class="line">     apt-get install DBus</div><div class="line">     sudo apt-get install libudev-dev</div><div class="line">     sudo apt-get install libical-dev</div><div class="line"></div><div class="line">     configure: error: readline header files are required</div><div class="line">     解决方法：</div><div class="line">      sudo apt-get install libreadline-dev</div><div class="line">     checking systemd system unit dir... configure: error: systemd system unit directory is required</div><div class="line">     checking systemd user unit dir... configure: error: systemd user unit directory is required</div><div class="line">     解决方法：</div><div class="line">     ./configure  --disable-systemd</div><div class="line">     或者</div><div class="line">     ./configure  --with-systemdsystemunitdir=/lib/systemd/system --with-systemduserunitdir=/usr/lib/systemd</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">```bash</div><div class="line">btproxy &lt;master-bt-mac-address&gt; &lt;slave-bt-mac-address&gt;</div></pre></td></tr></table></figure>
<p>The master 是发送连接请求方<br>the slave  是服务监听方</p>
<p>hcitool dev 查看本地<br>hcitool scan 扫描<br>hcitool inq  查询<br>hcitool cc  创建连接</p>
<p>hciconfig hci0 up</p>
<blockquote>
<p>Can’t init device hci0: Operation not possible due to RF-kill (132)<br>rfkill list bluetooth<br>rfkill unlock bluetooth</p>
</blockquote>
<p>hcidump -at<br>使用fang工具扫描隐藏的蓝牙设备<br>fang -r 范围 -s<br>fang -r b0aa3618e5d8-b0aa3618e5f4 -s</p>
<p>使用blueranger工具强制连接蓝牙设备：<br>blueranger.sh <hcix> <bdaddr><br>blueranger.sh hci0 bb:aa:76:db:aa:bb</bdaddr></hcix></p>
<p> 蓝牙规格：</p>
<p>规格名称     规格类型     分配编码     规格级别<br>警报类别ID     org.bluetooth.characteristic.alert_category_id     0x2A43     已采纳<br>警报类别ID位掩码     org.bluetooth.characteristic.alert_category_id_bit_mask     0x2A42     已采纳<br>警报级别     org.bluetooth.characteristic.alert_level     0x2A06     已采纳<br>警报通知控制点     org.bluetooth.characteristic.alert_notification_control_point     0x2A44     已采纳<br>警报状态     org.bluetooth.characteristic.alert_status     0x2A3F     已采纳<br>Appearance     org.bluetooth.characteristic.gap.appearance     0x2A01     Adopted<br>电池电量     org.bluetooth.characteristic.battery_level     0x2A19     已采纳<br>血压功能     org.bluetooth.characteristic.blood_pressure_feature     0x2A49     已采纳<br>血压测量     org.bluetooth.characteristic.blood_pressure_measurement     0x2A35     已采纳<br>人体传感器定位     org.bluetooth.characteristic.body_sensor_location     0x2A38     已采纳<br>引导键盘输入报告     org.bluetooth.characteristic.boot_keyboard_input_report     0x2A22     已采纳<br>引导键盘输出报告     org.bluetooth.characteristic.boot_keyboard_output_report     0x2A32     已采纳<br>引导鼠标输入报告     org.bluetooth.characteristic.boot_mouse_input_report     0x2A33     已采纳<br>CSC功能     org.bluetooth.characteristic.csc_feature     0x2A5C     已采纳<br>CSC测量     org.bluetooth.characteristic.csc_measurement     0x2A5B     已采纳<br>当前时间     org.bluetooth.characteristic.current_time     0x2A2B     已采纳<br>自行车功率控制点     bluetooth.characteristic.cycling_power_control_point     0x2A66     已采纳<br>自行车功率特征     org.bluteooth.characteristic.cycling_power_feature     0x2A65     已采纳<br>自行车功率测量     org.blueeooth.cycling_power_measurement     0x2A63     已采纳<br>自行车功率矢量     org.bluetooth.characteristic.cycling_power_vector     0x2A64     已采纳<br>日期时间     org.bluetooth.characteristic.date_time     0x2A08     已采纳<br>星期日期时间     org.bluetooth.characteristic.day_date_time     0x2A0A     已采纳<br>星期     org.bluetooth.characteristic.day_of_week     0x2A09     已采纳<br>Device Name     org.bluetooth.characteristic.gap.device_name     0x2A00     Adopted<br>日光节约时间偏移     org.bluetooth.characteristic.dst_offset     0x2A0D     已采纳<br>准确时间256     org.bluetooth.characteristic.exact_time_256     0x2A0C     已采纳<br>固件修订字符串     org.bluetooth.characteristic.firmware_revision_string     0x2A26     已采纳<br>血糖功能     org.bluetooth.characteristic.glucose_feature     0x2A51     已采纳<br>血糖测量     org.bluetooth.characteristic.glucose_measurement     0x2A18     已采纳<br>血糖测量环境     org.bluetooth.characteristic.glucose_measurement_context     0x2A34     已采纳<br>硬件修订字符串     org.bluetooth.characteristic.hardware_revision_string     0x2A27     已采纳<br>心率控制点     org.bluetooth.characteristic.heart_rate_control_point     0x2A39     已采纳<br>心率测量     org.bluetooth.characteristic.heart_rate_measurement     0x2A37     已采纳<br>HID控制点     org.bluetooth.characteristic.hid_control_point     0x2A4C     已采纳<br>HID信息     org.bluetooth.characteristic.hid_information     0x2A4A     已采纳<br>IEEE 11073-20601监管认证数据表     org.bluetooth.characteristic.ieee_11073-20601_regulatory_certification_data_list     0x2A2A     已采纳<br>中间体套囊压力     org.bluetooth.characteristic.intermediate_blood_pressure     0x2A36     已采纳<br>中间体温度     org.bluetooth.characteristic.intermediate_temperature     0x2A1E     已采纳<br>LN控制点     org.bluetooth.ln_control_point     0x2A6B     已采纳<br>LN功能     org.bluetooth.characteristic.ln_feature     0x2A6A     已采纳<br>当地时间信息     org.bluetooth.characteristic.local_time_information     0x2A0F     已采纳<br>定位和速度     org.bluetooth.location_and_speed     0x2A67     已采纳<br>制造商名称字符串     org.bluetooth.characteristic.manufacturer_name_string     0x2A29     已采纳<br>测量间隔     org.bluetooth.characteristic.measurement_interval     0x2A21     已采纳<br>型号字符串     org.bluetooth.characteristic.model_number_string     0x2A24     已采纳<br>导航     org.bluetooth.characteristic.navigation     0x2A68     已采纳<br>新警报     org.bluetooth.characteristic.new_alert     0x2A46     已采纳<br>Peripheral Preferred Connection Parameters     org.bluetooth.characteristic.gap.peripheral_preferred_connection_parameters     0x2A04     Adopted<br>Peripheral Privacy Flag     org.bluetooth.characteristic.gap.peripheral_privacy_flag     0x2A02     Adopted<br>PnP ID     org.bluetooth.characteristic.pnp_id     0x2A50     已采纳<br>定位质量     org.bluetooth.position_quality     0x2A69     已采纳<br>协议模式     org.bluetooth.characteristic.protocol_mode     0x2A4E     已采纳<br>Reconnection Address     org.bluetooth.characteristic.gap.reconnection_address     0x2A03     Adopted<br>记录存取控制点     org.bluetooth.characteristic.record_access_control_point     0x2A52     已采纳<br>参考时间信息     org.bluetooth.characteristic.reference_time_information     0x2A14     已采纳<br>报告     org.bluetooth.characteristic.report     0x2A4D     已采纳<br>报告地图     org.bluetooth.characteristic.report_map     0x2A4B     已采纳<br>振铃器控制点     org.bluetooth.characteristic.ringer_control_point     0x2A40     已采纳<br>振铃器设定     org.bluetooth.characteristic.ringer_setting     0x2A41     已采纳<br>RSC功能     org.bluetooth.characteristic.rsc_feature     0x2A54     已采纳<br>RSC测量     org.bluetooth.characteristic.rsc_measurement     0x2A53     已采纳<br>SC控制点     org.bluetooth.characteristic.sc_control_point     0x2A55     已采纳<br>扫描间隔窗口     org.bluetooth.characteristic.scan_interval_window     0x2A4F     已采纳<br>扫描刷新     org.bluetooth.characteristic.scan_refresh     0x2A31     已采纳<br>传感器定位     org.bluetooth.characteristic.sensor_location     0x2A5D     已采纳<br>序列号字符串     org.bluetooth.characteristic.serial_number_string     0x2A25     已采纳<br>Service Changed     org.bluetooth.characteristic.gatt.service_changed     0x2A05     Adopted<br>软件修订字符串     org.bluetooth.characteristic.software_revision_string     0x2A28     已采纳<br>获支持的新警报类别     org.bluetooth.characteristic.supported_new_alert_category     0x2A47     已采纳<br>获支持的未读警报类别     org.bluetooth.characteristic.supported_unread_alert_category     0x2A48     已采纳<br>系统ID     org.bluetooth.characteristic.system_id     0x2A23     已采纳<br>温度测量     org.bluetooth.characteristic.temperature_measurement     0x2A1C     已采纳<br>温度类型     org.bluetooth.characteristic.temperature_type     0x2A1D     已采纳<br>时间准确度     org.bluetooth.characteristic.time_accuracy     0x2A12     已采纳<br>时间源     org.bluetooth.characteristic.time_source     0x2A13     已采纳<br>时间更新控制点     org.bluetooth.characteristic.time_update_control_point     0x2A16     已采纳<br>时间更新状态     org.bluetooth.characteristic.time_update_state     0x2A17     已采纳<br>日光节约时间的时间     org.bluetooth.characteristic.time_with_dst     0x2A11     已采纳<br>时区     org.bluetooth.characteristic.time_zone     0x2A0E     已采纳<br>射频功率     org.bluetooth.characteristic.tx_power_level     0x2A07     已采纳<br>未读警报状态     org.bluetooth.characteristic.unread_alert_status     0x2A45     已采纳<br>记忆码     UUID规格     UUID     参考规格<br>«设备名称»     uuid16     0x2A00     蓝牙核心规格第3卷C部分第12.1节<br>«外观»     uuid16     0x2A01     蓝牙核心规格第3卷C部分第12.2节<br>«外置设备隐私标志»     uuid16     0x2A02     蓝牙核心规格第3卷C部分第12.3节<br>«重新连接地址»     uuid16     0x2A03     蓝牙核心规格第3卷C部分第12.4节<br>«外置设备首选连接参数»     uuid16     0x2A04     蓝牙核心规格第3卷C部分第12.5节<br>«服务更改»     uuid16     0x2A05     蓝牙核心规格第3卷G部分第7.1节</p>

    </div>
    <footer>
        
  
  <div class="categories">
    <a href="/categories/bluetooth/">bluetooth</a>
  </div>

        
  
  <div class="tags">
    <a href="/tags/bluetooth/">bluetooth</a>
  </div>
 
        <div class="clearfix"></div>
    </footer>
  </div>
</article>

 <nav id="pagination" >
    
    <a href="/1912/12/01/五行-木火土金水/" class="alignleft prev" title="五行:木火土金水">五行:木火土金水</a>
    
    
    <a href="/1912/12/01/RTL-sdr/" class="alignright next" title="RTL-sdr">RTL-sdr</a>
    
    <div class="clearfix"></div>
</nav>


</div></div>
    <aside id="sidebar" class="alignright">
  
<div class="widget tag">
  <h3 class="title">Categories</h3>
  <ul class="entry">
  
    <li><a href="/categories/bluetooth/">bluetooth</a><small>2</small></li>
  
    <li><a href="/categories/kali/">kali</a><small>3</small></li>
  
    <li><a href="/categories/linux/">linux</a><small>2</small></li>
  
    <li><a href="/categories/python/">python</a><small>1</small></li>
  
    <li><a href="/categories/sdr/">sdr</a><small>1</small></li>
  
    <li><a href="/categories/sqlmap/">sqlmap</a><small>3</small></li>
  
    <li><a href="/categories/web/">web</a><small>7</small></li>
  
    <li><a href="/categories/中医/">中医</a><small>4</small></li>
  
    <li><a href="/categories/安全/">安全</a><small>5</small></li>
  
    <li><a href="/categories/网络/">网络</a><small>1</small></li>
  
    <li><a href="/categories/逆向/">逆向</a><small>2</small></li>
  
  </ul>
</div>


  
<div class="widget tagcloud">
  <h3 class="title">Tag Cloud</h3>
  <div class="entry">
    <a href="/tags/aircrack/" style="font-size: 10px;">aircrack</a> <a href="/tags/bash/" style="font-size: 10px;">bash</a> <a href="/tags/bluetooth/" style="font-size: 12.5px;">bluetooth</a> <a href="/tags/cookie/" style="font-size: 10px;">cookie</a> <a href="/tags/elf/" style="font-size: 12.5px;">elf</a> <a href="/tags/kali/" style="font-size: 12.5px;">kali</a> <a href="/tags/linux/" style="font-size: 10px;">linux</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/rtl-sdr/" style="font-size: 10px;">rtl-sdr</a> <a href="/tags/sqlmap/" style="font-size: 12.5px;">sqlmap</a> <a href="/tags/sqlmapapi/" style="font-size: 10px;">sqlmapapi</a> <a href="/tags/waf/" style="font-size: 10px;">waf</a> <a href="/tags/web/" style="font-size: 17.5px;">web</a> <a href="/tags/wifi/" style="font-size: 10px;">wifi</a> <a href="/tags/wireshark/" style="font-size: 10px;">wireshark</a> <a href="/tags/xss/" style="font-size: 10px;">xss</a> <a href="/tags/中医/" style="font-size: 15px;">中医</a> <a href="/tags/五行/" style="font-size: 10px;">五行</a> <a href="/tags/养生/" style="font-size: 12.5px;">养生</a> <a href="/tags/审计/" style="font-size: 10px;">审计</a> <a href="/tags/工控/" style="font-size: 10px;">工控</a> <a href="/tags/批量/" style="font-size: 10px;">批量</a> <a href="/tags/易经/" style="font-size: 10px;">易经</a> <a href="/tags/端口/" style="font-size: 10px;">端口</a> <a href="/tags/笔记/" style="font-size: 20px;">笔记</a> <a href="/tags/绕过/" style="font-size: 10px;">绕过</a> <a href="/tags/重装/" style="font-size: 10px;">重装</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
  </div>
</div>


  <div class="widget tag">
<h3 class="title">友情链接</h3>
<ul class="entry">
<li><a href="http://blog.sina.com.cn/3838120958 " title=" Blog" target="_blank">_</a></li>
</ul>
</div>
</aside>
    <div class="clearfix"></div>
  </div>
<!-- mathjax config similar to math.stackexchange -->

<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<!--script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"-->
</script>
</body>
</html>


